<html>
	<head>
		<link rel="stylesheet" type="text/css" href="https://waadalharthi.github.io/CoffeeEffect/styles.css">
    <script type="text/javascript" src="https://canvasjs.com/assets/script/canvasjs.min.js"></script>

	</head>
	<body onload="displayGraph()">
		<h1> How much caffeine is too much for me? </h1>
		
		<form>
			
			<label> When did you drink your last coffee yesterday? </label>
			<div>
				<input type="time" value="14:00"  onmouseover="displayGraph()" onclick="displayGraph()" id="cof_time" name="cof_time">
			</div>
			<label>  With how many espresso shots?</label>
			<div>
				<input type="range" min="1" max="3" step="1" value="2" onmouseover="displayGraph()" onclick="displayGraph()" id="quantity" name="quantity">
    			</div>
			
			<label> When did you consume medications containing caffeine? </label>
			<div>
				<input type="time" value=""  onmouseover="displayGraph()" onclick="displayGraph()" id="med_time" name="med_time">
			</div>
			
			<label> When did you intend to sleep? </label>
			<div>
				<input type="time" value="23:00"  onmouseover="displayGraph()" onclick="displayGraph()" id="bedtime" name="bedtime">
			</div>
			
  		</form>
		
		<p id="result1"> result </p>

		<div position="relative" width="4" height="600" border="5px" solid= "black"> 
      			<svg width="2" height="600">
				<line x1="0" y1="0" x2="0" y2="600" style="stroke:black;stroke-width:4" />      			

            <img class="first" object-fit="contain" src="ezgifcom-gif-maker3.gif">  
	          <img class="second" object-fit="contain" src="ezgifcom-gif-maker4.gif">
            <img class="third" object-fit="contain" src="ezgifcom-gif-maker5.gif">

            <img class="forth" object-fit="contain" src="ezgifcom-gif-maker6.gif">
				</svg>
			
		</div>
		

		<div style="position:relative;">
		<div id="splineArea" style="position:relative; top:600px; height: 300px; width: 600px;">
			</div></div>
		
		
		<div id="funnel" style="height: 300px; width: 100%;"></div>
		

<script>
  

function displayGraph() {
	
	  document.querySelector(".first").src = 'ezgifcom-gif-maker5.gif';
	document.querySelector(".second").src = 'ezgifcom-gif-maker3.gif';
	document.querySelector(".third").src = 'ezgifcom-gif-maker4.gif';
 	document.querySelector(".forth").src = 'ezgifcom-gif-maker6.gif';
	
	
  var cof_time = document.querySelector("#cof_time").value;
  var quantity = document.querySelector("#quantity").value;
	
	var med_time = document.querySelector("#med_time").value;
	var bedtime = document.querySelector("#bedtime").value;

  //[ { x: min value of cof_time or med_time , y: quantity * 200 or medication dose },
  //  { x: prev x+100, y: prev y-? },
  // continure untill bedtime
  //  { x: bedtime , y: depends?} ]
  
  var med = med_time.substring(0, 2);
	med = parseInt(med);
  
  var cof = cof_time.substring(0, 2);
	cof = parseInt(cof);
  
  var bed = bedtime.substring(0, 2);
	bed = parseInt(bed);
  
  quantity = parseInt(quantity);
  
  var startX = cof;
  var startY = 80*quantity;
  
  if (med < cof) 
  {
    startX = med;
    startY = 200;
  } 
    
  document.querySelector("#result1").innerHTML =startX ;

    var datapoints =  [{x:(startX*100), y: startY},
               {x:(bed*100), y: (startY/(bed-startX))}];
               
  
	var splineAreaChart = new CanvasJS.Chart("splineArea",
    {
        axisY:{
            valueFormatString:"#"
        },
        axisX:{
           valueFormatString:"##:##"
        },
      data: [
      {        
        type: "splineArea",
	color: "rgba(215,130,55,.9)",
	fillOpacity: .8,
        xValueFormatString:" ##:##",
        yValueFormatString:"~#",
        dataPoints: datapoints
      }
      ]
    });

    splineAreaChart.render();
  
  


	
	var funnelChart = new CanvasJS.Chart("funnel", {
	theme: "light2",
	title:{
		text: "Company Recruitment Process"
	},
	data: [{
		type: "funnel",
		indexLabel: "{label} [{y}%]",
		neckHeight: 0,
		toolTipContent: "{label} - {y}%",
		dataPoints: [
			{ y: 100, label: "Candidates Applied" },
			{ y: 63, label: "Aptitude Test" },
			{ y: 35, label: "Technical Interview" },
			{ y: 15, label: "HR Interview" },
			{ y: 5, label: "Candidates Recruited" }
		]
	}]
});
funnelChart.render();

}
    </script>
			
	
	</body>
</html>
